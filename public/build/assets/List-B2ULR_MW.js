import{r,j as e,H as S,L as i,a as A}from"./app-BIvaOuEf.js";import{z as F}from"./transition-rDhN1b9O.js";import{L as R,q as M,z as E}from"./dialog-b85OuhdZ.js";import{P as D}from"./Pagination-DW2AhQOw.js";import{T as L}from"./TextInput-CMamx1LG.js";import{A as z}from"./AuthenticatedLayout-kJeZUxmd.js";import{e as P,f as T,g as O,h as $}from"./useUserQuery-DYcb1bUU.js";import{F as _}from"./EyeIcon-CZIFc69u.js";import{F as q}from"./PencilIcon-B0QKiOMZ.js";import{F as B}from"./TrashIcon-Drof47uk.js";/* empty css            */import"./use-server-handoff-complete-DQh3gNR0.js";import"./portal-D3VGp8MH.js";import"./chatStore-CKiPf-2p.js";import"./ApplicationLogo-B5ycJy_Q.js";import"./useTranslation-CQt-ezys.js";import"./DarkModeToggle-x_Bp1bEo.js";import"./useAuthQuery-fQ36WGNj.js";import"./api-VUh7n_q7.js";import"./useQuery-AWEAS7Ki.js";import"./useBaseQuery-DcobsDej.js";function I({title:a,titleId:l,...d},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":l},d),a?r.createElement("title",{id:l},a):null,r.createElement("path",{fillRule:"evenodd",d:"M4.848 2.771A49.144 49.144 0 0 1 12 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97-1.94.284-3.916.455-5.922.505a.39.39 0 0 0-.266.112L8.78 21.53A.75.75 0 0 1 7.5 21v-3.955a48.842 48.842 0 0 1-2.652-.316c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97Z",clipRule:"evenodd"}))}const Z=r.forwardRef(I);function H({title:a,titleId:l,...d},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":l},d),a?r.createElement("title",{id:l},a):null,r.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const V=r.forwardRef(H),G=({isOpen:a,closeModal:l,onConfirm:d,isLoading:n,user:o})=>o?e.jsx(F,{show:a,as:r.Fragment,children:e.jsxs(R,{as:"div",className:"fixed inset-0 z-10 flex items-center justify-center p-4",onClose:l,children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(M,{className:"w-full max-w-md rounded-xl bg-white dark:bg-gray-800 p-6 shadow-lg",children:[e.jsx(E,{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 text-center",children:"Delete User"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 text-center mb-6",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-semibold",children:o.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-300 dark:bg-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:d,disabled:n,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:n?"Deleting User...":"Delete"})]})]})})]})}):null,J=()=>{var b,y,j;const[a,l]=r.useState(1),[d,n]=r.useState(""),[o,c]=r.useState(!1),[g,m]=r.useState(null),v=s=>{m(s),c(!0)},h=()=>{m(null),c(!1)},{data:t,isLoading:u,refetch:f}=P({page:a,search:d}),p=T(f,h),w=()=>p.mutate({id:g.id}),N=O(),k=s=>N.mutate({id:s.id}),x=$(f),U=()=>x.mutate(),C=s=>{A.post(route("chat.create",s))};return r.useEffect(()=>{c(!1),m(null)},[]),e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Users"}),e.jsxs("div",{className:"py-12 overflow-auto",children:[e.jsxs("div",{className:"mx-auto max-w-[80%] md:max-w-5xl space-y-4",children:[e.jsx("div",{className:"w-full flex items-center justify-end gap-2 text-sm font-medium \n                                        text-gray-700 dark:text-gray-300",children:e.jsx("button",{onClick:U,disabled:x.isPending,className:"px-4 py-2.5 rounded-md text-white \n                                    bg-emerald-600 hover:bg-emerald-700 \n                                    dark:bg-emerald-500 dark:hover:bg-emerald-600 \n                                    transition-all duration-300",children:x.isPending?"Updating...":"Update Active Status"})}),e.jsx(L,{id:"name",className:"mt-1 block w-full dark:bg-transparent dark:text-white dark:border-gray-600",value:d,onChange:s=>n(s.target.value),placeholder:"Search user by name or role...",required:!0,autoComplete:"off"}),u?[1,2,3,4].map(s=>e.jsx(Q,{},s)):((b=t==null?void 0:t.data)==null?void 0:b.length)>0?(y=t==null?void 0:t.data)==null?void 0:y.map(s=>e.jsx(K,{toggle:()=>k(s),user:s,handleCreate:C,openDeleteModal:v},s.id)):e.jsx(W,{})]}),!u&&((j=t==null?void 0:t.data)==null?void 0:j.length)>0&&e.jsx(D,{setPage:l,meta:t==null?void 0:t.meta,links:t==null?void 0:t.links})]}),e.jsx(G,{isOpen:o,closeModal:h,onConfirm:w,isLoading:p.isPending,user:g})]})};J.layout=a=>e.jsx(z,{header:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Users"}),e.jsxs("div",{className:"hidden md:flex items-center justify-between gap-2",children:[e.jsx(i,{href:route("user.create"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Create Staff"}),e.jsx(i,{href:route("user.create-sub"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Create Sub Account"})]})]}),children:a});const K=({user:a,toggle:l,handleCreate:d,openDeleteModal:n})=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between hover:bg-gray-50 dark:hover:bg-gray-800 transition-all gap-3",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center gap-2",children:[a.avatar&&e.jsx("div",{className:"chat-image avatar w-12 mx-auto md:mx-0",children:e.jsx("div",{className:"rounded-full",children:e.jsx("img",{src:a.avatar})})}),!a.avatar&&e.jsx("div",{className:"chat-image avatar avatar-placeholder w-12 mx-auto md:mx-0",children:e.jsx("div",{className:"rounded-full w-12\n                    bg-gray-400 text-gray-800 \n                    dark:bg-gray-700 dark:text-gray-100",children:e.jsx("span",{className:"text-2xl",children:a.name.substring(0,1)})})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h3",{className:"text-base truncate font-semibold text-gray-800 dark:text-gray-100",children:a.name}),e.jsx("p",{className:"text-sm capitalize font-medium text-gray-500 dark:text-gray-400",children:a.role})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm justify-center",children:[(["staff","support","admin"].includes(a.role)||a.staff_id)&&e.jsx("input",{type:"checkbox",onChange:l,defaultChecked:a.active_status,className:"toggle bg-gray-300 dark:bg-gray-700 border-0 checked:bg-emerald-700 dark:checked:bg-emerald-700"}),e.jsx(i,{href:route("user.show",a),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx(i,{href:route("user.edit",a),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>d(a),className:"px-3 py-1 bg-slate-600 text-white rounded hover:bg-slate-700",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n(a),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:e.jsx(B,{className:"w-4 h-4"})})]})]}),Q=()=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 animate-pulse",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-300 dark:bg-gray-700"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2 md:mt-0",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-3 w-20 bg-gray-300 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm justify-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded"})]})]}),W=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-6 rounded-full mb-4",children:e.jsx(V,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"No Users Found"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"There are no users available at the moment."})]});export{J as default};
