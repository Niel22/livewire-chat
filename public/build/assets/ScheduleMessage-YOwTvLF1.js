import{j as e,r as h,u as _,H as F,a as I,L as A}from"./app-QTRmuy0Q.js";import{I as u}from"./InputError-B3BVnJaQ.js";import{I as y}from"./InputLabel-BzK1nGbc.js";import{P as L}from"./PrimaryButton-SBWOTXBg.js";import{T}from"./TextAreaInput-CgcKV2On.js";import{A as P}from"./AuthenticatedLayout-p1lxmRzO.js";import{z}from"./transition-osSG80cp.js";import"./UserAvatar-CdLbpkeW.js";import"./ApplicationLogo-DbO6mhra.js";import"./DarkModeToggle-8R5zP7L0.js";const B=({show:s,onClose:l,onConfirm:i})=>s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200",children:"Confirm Delete"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this scheduled message? This action cannot be undone."}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:i,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null,E=({group:s,scheduled_messages:l})=>{const[i,p]=h.useState(!1),[f,b]=h.useState(null),j=()=>{p(!1),b(null)},k=()=>{I.delete(route("group.schedule.delete",{group:s.id,schedule_message:f.id}),{onSuccess:()=>j()})},{data:d,setData:c,post:N,processing:v,errors:o,recentlySuccessful:w,reset:S}=_({message:"",attachments:[],scheduled_at:""}),[n,m]=h.useState([]),C=t=>{const a=Array.from(t.target.files),g=a.map(r=>({file:r,url:URL.createObjectURL(r)}));t.target.value=null,m(r=>[...r,...g]),c("attachments",[...d.attachments,...a])},M=t=>{const a=n.filter((r,x)=>x!==t),g=d.attachments.filter((r,x)=>x!==t);m(a),c("attachments",g)},D=t=>{t.preventDefault(),N(route("group.schedule",s),{preserveScroll:!0,onSuccess:()=>{S(),m([])}})};return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Schedule Message"}),e.jsx("div",{className:"py-12 overflow-auto",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-6 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"dark:bg-gray-800 bg-white p-4 shadow sm:rounded-lg sm:p-8 mb-10",children:e.jsxs("section",{className:"dark:bg-gray-800 bg-white",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-200",children:"Schedule New Message"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Write your message, attach images, and select when it should be sent."})]}),e.jsxs("form",{onSubmit:D,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"message",value:"Message Body"}),e.jsx(T,{id:"message",className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",value:d.message,onChange:t=>c("message",t.target.value),placeholder:"Type your message...",required:!0,rows:4}),e.jsx(u,{className:"mt-2 dark:text-red-400",message:o.message})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"attachments",value:"Attach Images"}),e.jsx("input",{type:"file",id:"attachments",multiple:!0,accept:"image/*",onChange:C,className:"mt-1 block w-full text-sm text-gray-600 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-gray-700 dark:file:text-gray-200"}),e.jsx(u,{className:"mt-2 dark:text-red-400",message:o.attachments}),n.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3",children:n.map((t,a)=>e.jsxs("div",{className:"relative rounded overflow-hidden border dark:border-gray-600",children:[e.jsx("img",{src:t.url,alt:`preview-${a}`,className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>M(a),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"âœ•"})]},a))})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"scheduled_at",value:"Schedule Date & Time"}),e.jsx("input",{type:"datetime-local",id:"scheduled_at",value:d.scheduled_at,onChange:t=>c("scheduled_at",t.target.value),required:!0,className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 rounded-md border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(u,{className:"mt-2 dark:text-red-400",message:o.scheduled_at})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{disabled:v,children:"Schedule Message"}),e.jsx(z,{show:w,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled."})})]})]})]})}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-200 mb-4",children:"Scheduled Messages"}),l.length===0?e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No scheduled messages yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Message"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Scheduled At"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Action"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200",children:t.message}),e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-400",children:new Date(t.scheduled_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>{p(!0),b(t)},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})})]},t.id))})]})})]})]})}),e.jsx(B,{onClose:j,onConfirm:k,show:i,selectedMessage:f})]})};E.layout=s=>e.jsx(P,{header:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Schedule Message"}),e.jsx(A,{href:route("dashboard"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Back"})]}),children:s});export{E as default};
