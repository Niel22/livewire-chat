System.register(["./app-legacy-Z1_F-9fD.js","./helpers-legacy-DziSQG3y.js","./XMarkIcon-legacy-BSjqzeN9.js","./InputError-legacy-0J8VB-xx.js","./InputLabel-legacy-Bm7YAjeu.js","./PrimaryButton-legacy-BC17VviT.js","./TextAreaInput-legacy-CwkbtATU.js","./AuthenticatedLayout-legacy-Bx7Eta1u.js","./EyeIcon-legacy-D4JsqhkJ.js","./TrashIcon-legacy-73zcCPB7.js","./transition-legacy-Dvz4sPCh.js","./app-legacy-BygksiD9.js","./chatStore-legacy-qm2bYAY9.js","./ApplicationLogo-legacy-Di2gQdQU.js","./useTranslation-legacy-CpvF9_ZV.js","./portal-legacy-gJg3uVIZ.js","./use-server-handoff-complete-legacy-CPGYZi8J.js","./DarkModeToggle-legacy-CM3V1Qgw.js","./useAuthQuery-legacy-CJa03JXq.js","./api-legacy-DtuMqj0J.js"],function(e,s){"use strict";var a,t,r,l,d,c,n,i,g,o,x,m,h,u,y,j;return{setters:[e=>{a=e.j,t=e.r,r=e.u,l=e.H,d=e.a,c=e.L},e=>{n=e.f},e=>{i=e.F},e=>{g=e.I},e=>{o=e.I},e=>{x=e.P},e=>{m=e.T},e=>{h=e.A},e=>{u=e.F},e=>{y=e.F},e=>{j=e.z},null,null,null,null,null,null,null,null,null],execute:function(){const s=({show:e,onClose:s,onConfirm:t})=>e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200",children:"Confirm Delete"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this scheduled message? This action cannot be undone."}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{onClick:s,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null,p=({isOpen:e,setIsOpen:s,message:t=null})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-200 "+(e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg w-full max-w-md overflow-hidden transform transition-transform duration-200 "+(e?"scale-100":"scale-95"),children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Scheduled Message"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(i,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"text-gray-700 dark:text-gray-200 text-sm whitespace-pre-wrap",children:t.message}),t.attachments.length>0&&a.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.attachments.map((e,s)=>a.jsx("div",{className:"w-full h-32 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:a.jsx("img",{src:`${e.path}`,alt:`Attachment ${s+1}`,className:"w-full h-full object-cover"})},s))}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Scheduled for: ",a.jsx("span",{className:"font-medium",children:n(t.scheduled_at)})]})]})]})}):null;e("default",({group:e,scheduled_messages:c})=>{const[n,i]=t.useState(!1),[h,b]=t.useState(!1),[f,N]=t.useState(null),v=()=>{i(!1),N(null)},k=Intl.DateTimeFormat().resolvedOptions().timeZone,{data:w,setData:S,post:C,processing:I,errors:A,recentlySuccessful:M,reset:F}=r({message:"",attachments:[],scheduled_at:"",timezone:k}),[T,_]=t.useState([]);return t.useEffect(()=>{F(),_([])},[]),a.jsxs(a.Fragment,{children:[a.jsx(l,{title:"Schedule Message"}),a.jsx("div",{className:"py-12 overflow-auto",children:a.jsxs("div",{className:"mx-auto max-w-3xl space-y-6 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"dark:bg-gray-800 bg-white p-4 shadow sm:rounded-lg sm:p-8 mb-10",children:a.jsxs("section",{className:"dark:bg-gray-800 bg-white",children:[a.jsxs("header",{children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-200",children:"Schedule New Message"}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Write your message, attach images, and select when it should be sent."})]}),a.jsxs("form",{onSubmit:s=>{s.preventDefault(),C(route("group.schedule",e),{preserveScroll:!0,onSuccess:()=>{F(),_([])}})},className:"mt-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx(o,{htmlFor:"message",value:"Message Body"}),a.jsx(m,{id:"message",className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",value:w.message,onChange:e=>S("message",e.target.value),placeholder:"Type your message...",required:!0,rows:4}),a.jsx(g,{className:"mt-2 dark:text-red-400",message:A.message})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"attachments",value:"Attach Images"}),a.jsx("input",{type:"file",id:"attachments",multiple:!0,accept:"image/*",onChange:e=>{const s=Array.from(e.target.files),a=s.map(e=>({file:e,url:URL.createObjectURL(e)}));e.target.value=null,_(e=>[...e,...a]),S("attachments",[...w.attachments,...s])},className:"mt-1 block w-full text-sm text-gray-600 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-gray-700 dark:file:text-gray-200"}),a.jsx(g,{className:"mt-2 dark:text-red-400",message:A.attachments}),T.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3",children:T.map((e,s)=>a.jsxs("div",{className:"relative rounded overflow-hidden border dark:border-gray-600",children:[a.jsx("img",{src:e.url,alt:`preview-${s}`,className:"w-full h-32 object-cover"}),a.jsx("button",{type:"button",onClick:()=>(e=>{const s=T.filter((s,a)=>a!==e),a=w.attachments.filter((s,a)=>a!==e);_(s),S("attachments",a)})(s),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"âœ•"})]},s))})]}),a.jsxs("div",{children:[a.jsx(o,{htmlFor:"scheduled_at",value:"Schedule Date & Time"}),a.jsx("input",{type:"datetime-local",id:"scheduled_at",value:w.scheduled_at,onChange:e=>S("scheduled_at",e.target.value),required:!0,className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 rounded-md border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500"}),a.jsx(g,{className:"mt-2 dark:text-red-400",message:A.scheduled_at})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(x,{disabled:I,children:"Schedule Message"}),a.jsx(j,{show:M,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled."})})]})]})]})}),a.jsxs("div",{className:"max-w-[90%] mx-auto md:max-w-full mt-10",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-200 mb-4",children:"Scheduled Messages"}),0===c.length?a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No scheduled messages yet."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Message"}),a.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Scheduled At"}),a.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Action"})]})}),a.jsx("tbody",{children:c.map(e=>a.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[a.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200 truncate max-w-sm",children:e.message}),a.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-400",children:new Date(e.scheduled_at).toLocaleString()}),a.jsxs("td",{className:"px-4 space-x-3 py-2",children:[a.jsx("button",{onClick:()=>{b(!0),N(e)},className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:a.jsx(u,{className:"w-4"})}),a.jsx("button",{onClick:()=>{i(!0),N(e)},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:a.jsx(y,{className:"w-4"})})]})]},e.id))})]})})]})]})}),a.jsx(p,{isOpen:h,setIsOpen:b,message:f}),a.jsx(s,{onClose:v,onConfirm:()=>{d.delete(route("group.schedule.delete",{group:e.id,schedule_message:f.id}),{onSuccess:()=>v()})},show:n,selectedMessage:f})]})}).layout=e=>a.jsx(h,{header:a.jsxs("div",{className:"w-full flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Schedule Message"}),a.jsx(c,{href:route("dashboard"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Back"})]}),children:e})}}});
