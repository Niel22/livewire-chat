var L=s=>{throw TypeError(s)};var O=(s,t,e)=>t.has(s)||L("Cannot "+e);var o=(s,t,e)=>(O(s,t,"read from private field"),e?e.call(s):t.get(s)),g=(s,t,e)=>t.has(s)?L("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),b=(s,t,e,i)=>(O(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),m=(s,t,e)=>(O(s,t,"access private method"),e);import{a as C}from"./api-VUh7n_q7.js";import{S as F,s as U,D as P,E as k,B as A,l as q,r as p,o as D,C as I,t as M}from"./app-BIvaOuEf.js";var a,c,n,u,h,v,E,T,j=(T=class extends F{constructor(t,e){super();g(this,h);g(this,a);g(this,c);g(this,n);g(this,u);b(this,a,t),this.setOptions(e),this.bindMethods(),m(this,h,v).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=o(this,a).defaultMutationOptions(t),U(this.options,e)||o(this,a).getMutationCache().notify({type:"observerOptionsUpdated",mutation:o(this,n),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&P(e.mutationKey)!==P(this.options.mutationKey)?this.reset():((i=o(this,n))==null?void 0:i.state.status)==="pending"&&o(this,n).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=o(this,n))==null||t.removeObserver(this)}onMutationUpdate(t){m(this,h,v).call(this),m(this,h,E).call(this,t)}getCurrentResult(){return o(this,c)}reset(){var t;(t=o(this,n))==null||t.removeObserver(this),b(this,n,void 0),m(this,h,v).call(this),m(this,h,E).call(this)}mutate(t,e){var i;return b(this,u,e),(i=o(this,n))==null||i.removeObserver(this),b(this,n,o(this,a).getMutationCache().build(o(this,a),this.options)),o(this,n).addObserver(this),o(this,n).execute(t)}},a=new WeakMap,c=new WeakMap,n=new WeakMap,u=new WeakMap,h=new WeakSet,v=function(){var e,i;const t=(i=(e=o(this,n))==null?void 0:e.state)!=null?i:k();b(this,c,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},E=function(t){A.batch(()=>{var e,i,r,y,l,f,x,K;if(o(this,u)&&this.hasListeners()){const d=o(this,c).variables,w=o(this,c).context,S={client:o(this,a),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((i=(e=o(this,u)).onSuccess)==null||i.call(e,t.data,d,w,S),(y=(r=o(this,u)).onSettled)==null||y.call(r,t.data,null,d,w,S)):(t==null?void 0:t.type)==="error"&&((f=(l=o(this,u)).onError)==null||f.call(l,t.error,d,w,S),(K=(x=o(this,u)).onSettled)==null||K.call(x,void 0,t.error,d,w,S))}this.listeners.forEach(d=>{d(o(this,c))})})},T);function R(s,t){const e=q(),[i]=p.useState(()=>new j(e,s));p.useEffect(()=>{i.setOptions(s)},[i,s]);const r=p.useSyncExternalStore(p.useCallback(l=>i.subscribe(A.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),y=p.useCallback((l,f)=>{i.mutate(l,f).catch(D)},[i]);if(r.error&&I(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:y,mutateAsync:r.mutate}}const B=async s=>(await C.post("/register",s)).data||null,Q=async s=>{const{data:t}=await C.post("/login",s);return t||null},$=async()=>{const{data:s}=await C.post("/logout");return s||null},J=()=>{const{setToast:s}=M.getState();return R({mutationFn:Q,onSuccess:t=>{s("Logged In Succesfully, wait while you are being redirected to your dashboard","success"),window.location.href="/"},onError:t=>{var e,i,r;s((r=(i=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:i.message)!=null?r:"A Problem Occured, Please try again","error")}})},N=()=>{const{setToast:s}=M.getState();return R({mutationFn:B,onSuccess:t=>{if(s("Registered Succesfully, wait while you are being redirected to your dashboard","success"),t!=null&&t.data){window.location.href="conversation/".concat(t.data.id);return}window.location.href="/"},onError:t=>{var e,i,r;s((r=(i=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:i.message)!=null?r:"A Problem Occured, Please try again","error")}})},V=()=>{const{setToast:s}=M.getState();return R({mutationFn:$,onSuccess:()=>{s("Logged out successfully","success"),window.location.href="/login"},onError:()=>{s("Something went wrong while logging out","error")}})};export{N as a,R as b,V as c,J as u};
