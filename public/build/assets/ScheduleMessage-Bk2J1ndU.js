import{j as e,r as o,u as A,H as T,a as L,L as $}from"./app-BIvaOuEf.js";import{f as R}from"./helpers-B1ZXKWgC.js";import{F as z}from"./XMarkIcon-B2QMpqSQ.js";import{I as j}from"./InputError-DMTHiljA.js";import{I as b}from"./InputLabel-C7oMekZq.js";import{P as E}from"./PrimaryButton-CjOu6GW1.js";import{T as P}from"./TextAreaInput-DYNKtZ3v.js";import{A as B}from"./AuthenticatedLayout-kJeZUxmd.js";import{F as q}from"./EyeIcon-CZIFc69u.js";import{F as H}from"./TrashIcon-Drof47uk.js";import{z as O}from"./transition-rDhN1b9O.js";/* empty css            */import"./chatStore-CKiPf-2p.js";import"./ApplicationLogo-B5ycJy_Q.js";import"./useTranslation-CQt-ezys.js";import"./portal-D3VGp8MH.js";import"./use-server-handoff-complete-DQh3gNR0.js";import"./DarkModeToggle-x_Bp1bEo.js";import"./useAuthQuery-fQ36WGNj.js";import"./api-VUh7n_q7.js";const U=({show:a,onClose:l,onConfirm:s})=>a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200",children:"Confirm Delete"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this scheduled message? This action cannot be undone."}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null,V=({isOpen:a,setIsOpen:l,message:s=null})=>a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-200 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg w-full max-w-md overflow-hidden transform transition-transform duration-200 ".concat(a?"scale-100":"scale-95"),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Scheduled Message"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(z,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"text-gray-700 dark:text-gray-200 text-sm whitespace-pre-wrap",children:s.message}),s.attachments.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.attachments.map((c,i)=>e.jsx("div",{className:"w-full h-32 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:e.jsx("img",{src:"".concat(c.path),alt:"Attachment ".concat(i+1),className:"w-full h-full object-cover"})},i))}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Scheduled for: ",e.jsx("span",{className:"font-medium",children:R(s.scheduled_at)})]})]})]})}):null,W=({group:a,scheduled_messages:l})=>{const[s,c]=o.useState(!1),[i,N]=o.useState(!1),[g,h]=o.useState(null),w=()=>{c(!1),h(null)},k=()=>{L.delete(route("group.schedule.delete",{group:a.id,schedule_message:g.id}),{onSuccess:()=>w()})},S=Intl.DateTimeFormat().resolvedOptions().timeZone,{data:n,setData:m,post:M,processing:C,errors:u,recentlySuccessful:F,reset:v}=A({message:"",attachments:[],scheduled_at:"",timezone:S}),[p,x]=o.useState([]),_=t=>{const r=Array.from(t.target.files),y=r.map(d=>({file:d,url:URL.createObjectURL(d)}));t.target.value=null,x(d=>[...d,...y]),m("attachments",[...n.attachments,...r])},D=t=>{const r=p.filter((d,f)=>f!==t),y=n.attachments.filter((d,f)=>f!==t);x(r),m("attachments",y)},I=t=>{t.preventDefault(),M(route("group.schedule",a),{preserveScroll:!0,onSuccess:()=>{v(),x([])}})};return o.useEffect(()=>{v(),x([])},[]),e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Schedule Message"}),e.jsx("div",{className:"py-12 overflow-auto",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-6 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"dark:bg-gray-800 bg-white p-4 shadow sm:rounded-lg sm:p-8 mb-10",children:e.jsxs("section",{className:"dark:bg-gray-800 bg-white",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-200",children:"Schedule New Message"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Write your message, attach images, and select when it should be sent."})]}),e.jsxs("form",{onSubmit:I,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"message",value:"Message Body"}),e.jsx(P,{id:"message",className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",value:n.message,onChange:t=>m("message",t.target.value),placeholder:"Type your message...",required:!0,rows:4}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:u.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"attachments",value:"Attach Images"}),e.jsx("input",{type:"file",id:"attachments",multiple:!0,accept:"image/*",onChange:_,className:"mt-1 block w-full text-sm text-gray-600 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-gray-700 dark:file:text-gray-200"}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:u.attachments}),p.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3",children:p.map((t,r)=>e.jsxs("div",{className:"relative rounded overflow-hidden border dark:border-gray-600",children:[e.jsx("img",{src:t.url,alt:"preview-".concat(r),className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>D(r),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"âœ•"})]},r))})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"scheduled_at",value:"Schedule Date & Time"}),e.jsx("input",{type:"datetime-local",id:"scheduled_at",value:n.scheduled_at,onChange:t=>m("scheduled_at",t.target.value),required:!0,className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 rounded-md border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:u.scheduled_at})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{disabled:C,children:"Schedule Message"}),e.jsx(O,{show:F,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled."})})]})]})]})}),e.jsxs("div",{className:"max-w-[90%] mx-auto md:max-w-full mt-10",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-200 mb-4",children:"Scheduled Messages"}),l.length===0?e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No scheduled messages yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Message"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Scheduled At"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Action"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200 truncate max-w-sm",children:t.message}),e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-400",children:new Date(t.scheduled_at).toLocaleString()}),e.jsxs("td",{className:"px-4 space-x-3 py-2",children:[e.jsx("button",{onClick:()=>{N(!0),h(t)},className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:e.jsx(q,{className:"w-4"})}),e.jsx("button",{onClick:()=>{c(!0),h(t)},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:e.jsx(H,{className:"w-4"})})]})]},t.id))})]})})]})]})}),e.jsx(V,{isOpen:i,setIsOpen:N,message:g}),e.jsx(U,{onClose:w,onConfirm:k,show:s,selectedMessage:g})]})};W.layout=a=>e.jsx(B,{header:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Schedule Message"}),e.jsx($,{href:route("dashboard"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Back"})]}),children:a});export{W as default};
