System.register(["./app-legacy-Z1_F-9fD.js","./chatStore-legacy-qm2bYAY9.js","./ApplicationLogo-legacy-Di2gQdQU.js","./DarkModeToggle-legacy-CM3V1Qgw.js","./transition-legacy-Dvz4sPCh.js","./useAuthQuery-legacy-CJa03JXq.js","./useTranslation-legacy-CpvF9_ZV.js"],function(e,r){"use strict";var t,s,a,n,i,o,d,c,l,g,u,x,m;return{setters:[e=>{t=e.r,s=e.c,a=e.j,n=e.L,i=e.d},e=>{o=e.U,d=e.u},e=>{c=e.A,l=e.T},e=>{g=e.D},e=>{u=e.z},e=>{x=e.c},e=>{m=e.u}],execute:function(){e("A",function({header:e,children:r}){const{t:o}=m("sidebar"),{component:u}=i();t.useEffect(()=>{"Notification"in window&&"granted"!==Notification.permission&&Notification.requestPermission()},[]);const h=x(),p=()=>h.mutate(),y=d(e=>e.conversations),f=i(),j=f.props.auth.user,_=f.props.selectedConversation,C=f.props.sub_account,M=()=>"admin"===j.role,[S,U]=t.useState(!1),{emit:L}=s();return t.useEffect(()=>(y?.forEach(e=>{let r=`message.group.${e.id}`;e.is_group||(r=`message.user.${[parseInt(j.id),parseInt(e.receiver_id)].sort((e,r)=>e-r).join("-")}`),Echo.private(r).error(e=>{}).listen("SocketMessage",e=>{const r=e.message;L("message.created",r),r.sender_id!==j.id&&L("newMessageNotification",{user:r.sender,conversation_id:r.conversation_id,group_id:r.group_id,message:r.message||"Shared "+(1===r.attachments.length?"an attachment":r.attachments.length+" attachments")})}).listen("SocketDeleteMessage",e=>{const{message:r,prevMessage:t}=e;L("message.deleted",{message:r,prevMessage:t})}).listen("SocketMessagePinned",e=>{L("message.pinned",e.message)}),e.is_group&&Echo.private(`group.${e.id}`).listen("SocketGroupLocked",e=>{L("group.locked",e.group)}).listen("SocketMemberMuted",e=>{L("member.muted",e.member)})}),()=>{y?.forEach(e=>{let r=`message.group.${e.id}`;e.is_group||(r=`message.user.${[parseInt(j.id),parseInt(e.receiver_id)].sort((e,r)=>e-r).join("-")}`),Echo.leave(r)})}),[y]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-100vh sm:min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col h-screen",children:[("staff"===j.role||null!==j.staff_id)&&!!C.length&&a.jsx("nav",{className:"hidden md:flex border-b max-h-[60px] border-gray-100 bg-white dark:border-gray-700 dark:bg-gray-800 shadow-lg",children:a.jsx("div",{className:"mr-auto max-w-[90%] px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex h-16 items-center",children:a.jsx("div",{className:"flex hide-scrollbar space-x-4 overflow-x-auto scrollbar-hide py-2",children:C.map(e=>a.jsxs(n,{href:route("switch",e),className:"pb-2 "+(parseInt(e.id)===parseInt(j.id)?"border-b-4 border-blue-500":"border-b-4 border-transparent"),children:[e.avatar&&a.jsx("div",{className:"chat-image avatar ",children:a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:a.jsx("img",{src:`/storage/${e.avatar}`})})}),!e.avatar&&a.jsx("div",{className:"chat-image avatar avatar-placeholder ",children:a.jsx("div",{className:"rounded-full w-8 h-8 \n                                                        bg-gray-400 text-gray-800 \n                                                        dark:bg-gray-700 dark:text-gray-100",children:a.jsx("span",{className:"text-xl",children:e.name.substring(0,1)})})})]},e.id))})})})}),a.jsxs("nav",{className:`${!!_&&"hidden md:block"} border-b border-gray-100 bg-white dark:border-gray-700 dark:bg-gray-800 shadow-lg`,children:[a.jsx("div",{className:"mx-auto max-w-[90%] px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex h-16 justify-between",children:[a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex shrink-0 items-center",children:a.jsx(n,{href:"/",children:a.jsx(c,{className:"block w-40 h-auto fill-current text-gray-800 dark:text-gray-200"})})}),M()&&a.jsxs("div",{className:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex",children:[a.jsx(N,{href:route("dashboard"),active:route().current("dashboard"),className:"text-gray-700 dark:text-gray-200",children:"Dashboard"}),a.jsx(N,{href:route("group.list"),active:route().current("group.list"),className:"text-gray-700 dark:text-gray-200",children:"Groups"}),a.jsx(N,{href:route("user.list"),active:route().current("user.list"),className:"text-gray-700 dark:text-gray-200",children:"Users"})]})]}),a.jsxs("div",{className:"hidden sm:ms-6 sm:flex sm:items-center",children:[a.jsx(g,{}),a.jsx(l,{}),a.jsx("div",{className:"relative ms-3",children:a.jsxs(k,{children:[a.jsx(k.Trigger,{children:a.jsx("span",{className:"inline-flex rounded-md",children:a.jsxs("button",{type:"button",className:"inline-flex items-center rounded-md border border-transparent bg-white dark:bg-gray-700 px-3 py-2 text-sm font-medium leading-4 text-gray-500 dark:text-gray-300 transition duration-150 ease-in-out hover:text-gray-700 dark:hover:text-gray-100 focus:outline-none",children:[j.name,a.jsx("svg",{className:"-me-0.5 ms-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),a.jsxs(k.Content,{className:"dark:bg-gray-700 dark:text-gray-200",children:[a.jsx(k.Link,{href:route("profile.edit"),children:o("profile")}),a.jsx("button",{onClick:p,className:"w-full text-sm text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600",children:o("logout")})]})]})})]}),a.jsxs("div",{className:"-me-2 flex items-center sm:hidden",children:[a.jsxs("div",{className:"flex items-center mr-2",children:[a.jsx(g,{}),a.jsx(l,{})]}),a.jsx("button",{onClick:()=>U(e=>!e),className:"inline-flex items-center justify-center rounded-md p-2 text-gray-400 dark:text-gray-300 transition duration-150 ease-in-out hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-500 dark:hover:text-gray-100 focus:outline-none",children:a.jsxs("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("path",{className:S?"hidden":"inline-flex",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}),a.jsx("path",{className:S?"inline-flex":"hidden",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})]})})]})]})}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>U(!1)}),a.jsxs("div",{className:"fixed top-0 right-0 h-full w-[75%] max-w-xs sm:w-[30%] bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out z-50 "+(S?"translate-x-0":"translate-x-full"),children:[a.jsxs("div",{className:"space-y-1 pb-3 pt-4 px-4",children:[a.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200",children:j.name}),a.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:j.email})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pb-4 pt-4",children:a.jsxs("div",{className:"mt-3 space-y-1 px-4",children:[M()&&a.jsxs(a.Fragment,{children:[a.jsx(w,{href:route("dashboard"),active:route().current("dashboard"),className:"block text-gray-700 dark:text-gray-200",children:"Dashboard"}),a.jsx(w,{href:route("group.list"),active:route().current("group.list"),className:"block text-gray-700 dark:text-gray-200",children:"Group"}),a.jsx(w,{href:route("user.list"),active:route().current("user.list"),className:"block text-gray-700 dark:text-gray-200",children:"User"})]}),a.jsx(w,{href:route("profile.edit"),active:route().current("profile.edit"),className:"block text-gray-700 dark:text-gray-200",children:o("profile")}),a.jsx(w,{onClick:p,as:"button",className:"block text-sm text-gray-700 hover:bg-red-300 dark:hover:bg-red-500 dark:text-gray-200",children:o("logout")})]})})]})]}),e&&a.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:a.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:e})}),r]}),a.jsx(v,{}),a.jsx(b,{})]})});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));let h;const p=new Uint8Array(16),y={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function f(e,t,s){if(y.randomUUID&&!e)return y.randomUUID();const a=(e=e||{}).random??e.rng?.()??function(){if(!h){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");h=crypto.getRandomValues.bind(crypto)}return h(p)}();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=15&a[6]|64,a[8]=63&a[8]|128,function(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}(a)}const b=({message:e})=>{const[r,i]=t.useState([]),{on:d}=s();return t.useEffect(()=>d("newMessageNotification",({message:e,user:r,group_id:t,conversation_id:s})=>{const a=f();i(n=>[...n,{message:e,uuid:a,user:r,group_id:t,conversation_id:s}]),setTimeout(()=>{i(e=>e.filter(e=>e.uuid!==a))},5e3)}),[d]),a.jsx("div",{className:"toast toast-top toast-center min-w-[280px]",children:r?.map((e,r)=>a.jsx("div",{className:"alert alert-success px-4 py-3 text-gray-100 rounded-md  ",children:a.jsxs(n,{className:"flex items-center gap-2 justify-start",href:e.group_id?route("chat.group",e.group_id):route("chat.user",e.conversation_id),children:[a.jsx(o,{user:e.user}),a.jsx("span",{children:e.message})]})},e.uuid))})},v=({message:e})=>{const[r,n]=t.useState([]),{on:i}=s();return t.useEffect(()=>{i("toast.show",e=>{const r=f();n(t=>[...t,{message:e,uuid:r}]),setTimeout(()=>{n(e=>e.filter(e=>e.uuid!==r))},5e3)})},[i]),a.jsx("div",{className:"toast toast-top toast-center min-w-[280px]",children:r?.map((e,r)=>a.jsx("div",{className:"alert alert-success truncate px-4 py-3 text-gray-100 rounded-md  ",children:a.jsx("span",{children:e.message})},e.uuid))})},j=t.createContext(),k=({children:e})=>{const[r,s]=t.useState(!1);return a.jsx(j.Provider,{value:{open:r,setOpen:s,toggleOpen:()=>{s(e=>!e)}},children:a.jsx("div",{className:"relative",children:e})})};function N({active:e=!1,className:r="",children:t,...s}){return a.jsx(n,{...s,className:"inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium leading-5 transition duration-150 ease-in-out focus:outline-none "+(e?"border-indigo-400 text-gray-900 focus:border-indigo-700":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 focus:border-gray-300 focus:text-gray-700")+r,children:t})}function w({active:e=!1,className:r="",children:t,...s}){return a.jsx(n,{...s,className:`flex w-full items-start border-l-4 py-2 pe-4 ps-3 text-base font-medium transition duration-150 ease-in-out focus:outline-none ${e?"border-indigo-400 bg-indigo-50 text-indigo-700 focus:border-indigo-700 focus:bg-indigo-100 focus:text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300 dark:focus:bg-indigo-800 dark:focus:text-indigo-200":"border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800 focus:border-gray-300 focus:bg-gray-50 focus:text-gray-800 dark:text-gray-400 dark:hover:border-gray-500 dark:hover:bg-gray-700 dark:hover:text-gray-200 dark:focus:border-gray-500 dark:focus:bg-gray-700 dark:focus:text-gray-200"} ${r}`,children:t})}k.Trigger=({children:e})=>{const{open:r,setOpen:s,toggleOpen:n}=t.useContext(j);return a.jsxs(a.Fragment,{children:[a.jsx("div",{onClick:n,children:e}),r&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})},k.Content=({align:e="right",width:r="48",contentClasses:s="py-1 bg-white dark:bg-gray-800",children:n})=>{const{open:i,setOpen:o}=t.useContext(j);let d="origin-top";"left"===e?d="ltr:origin-top-left rtl:origin-top-right start-0":"right"===e&&(d="ltr:origin-top-right rtl:origin-top-left end-0");let c="";return"48"===r&&(c="w-48"),a.jsx(a.Fragment,{children:a.jsx(u,{show:i,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${d} ${c}`,onClick:()=>o(!1),children:a.jsx("div",{className:`rounded-md ring-1 ring-black ring-opacity-5 ${s}`,children:n})})})})},k.Link=({className:e="",children:r,...t})=>a.jsx(n,{...t,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:bg-gray-700 "+e,children:r})}}});
