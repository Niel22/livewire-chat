import{r as l,j as e,u as I,H as A,a as R,L as E}from"./app-BOXF9kda.js";import{f as L}from"./helpers-SYRP98BK.js";import{F as T,a as $}from"./XMarkIcon-C8OMiIfx.js";import{I as j}from"./InputError-r22QiUJH.js";import{I as b}from"./InputLabel-BzRjzjfg.js";import{P as z}from"./PrimaryButton-Bd263ict.js";import{T as B}from"./TextAreaInput-CT7zXRKQ.js";import{A as P}from"./AuthenticatedLayout-DiSAqU57.js";import{z as Z}from"./transition-BsEvcFWz.js";import"./UserAvatar-B8ZmowRI.js";import"./ApplicationLogo-DWigK-gJ.js";import"./DarkModeToggle-D_lKjdDL.js";function q({title:a,titleId:r,...s},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":r},s),a?l.createElement("title",{id:r},a):null,l.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),l.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const H=l.forwardRef(q),O=({show:a,onClose:r,onConfirm:s})=>a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-200",children:"Confirm Delete"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this scheduled message? This action cannot be undone."}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:s,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})}):null,U=({isOpen:a,setIsOpen:r,message:s=null})=>a?(console.log(s),e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-200 ${a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:e.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl shadow-lg w-full max-w-md overflow-hidden transform transition-transform duration-200 ${a?"scale-100":"scale-95"}`,children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Scheduled Message"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"text-gray-700 dark:text-gray-200 text-sm whitespace-pre-wrap",children:s.message}),s.attachments.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.attachments.map((c,i)=>e.jsx("div",{className:"w-full h-32 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:e.jsx("img",{src:`/storage/${c.path}`,alt:`Attachment ${i+1}`,className:"w-full h-full object-cover"})},i))}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Scheduled for: ",e.jsx("span",{className:"font-medium",children:L(s.scheduled_at)})]})]})]})})):null,V=({group:a,scheduled_messages:r})=>{const[s,c]=l.useState(!1),[i,w]=l.useState(!1),[x,g]=l.useState(null),v=()=>{c(!1),g(null)},N=()=>{R.delete(route("group.schedule.delete",{group:a.id,schedule_message:x.id}),{onSuccess:()=>v()})},{data:n,setData:m,post:k,processing:S,errors:h,recentlySuccessful:M,reset:C}=I({message:"",attachments:[],scheduled_at:""}),[u,y]=l.useState([]),F=t=>{const d=Array.from(t.target.files),p=d.map(o=>({file:o,url:URL.createObjectURL(o)}));t.target.value=null,y(o=>[...o,...p]),m("attachments",[...n.attachments,...d])},_=t=>{const d=u.filter((o,f)=>f!==t),p=n.attachments.filter((o,f)=>f!==t);y(d),m("attachments",p)},D=t=>{t.preventDefault(),k(route("group.schedule",a),{preserveScroll:!0,onSuccess:()=>{C(),y([])}})};return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Schedule Message"}),e.jsx("div",{className:"py-12 overflow-auto",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-6 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"dark:bg-gray-800 bg-white p-4 shadow sm:rounded-lg sm:p-8 mb-10",children:e.jsxs("section",{className:"dark:bg-gray-800 bg-white",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-200",children:"Schedule New Message"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Write your message, attach images, and select when it should be sent."})]}),e.jsxs("form",{onSubmit:D,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"message",value:"Message Body"}),e.jsx(B,{id:"message",className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",value:n.message,onChange:t=>m("message",t.target.value),placeholder:"Type your message...",required:!0,rows:4}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:h.message})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"attachments",value:"Attach Images"}),e.jsx("input",{type:"file",id:"attachments",multiple:!0,accept:"image/*",onChange:F,className:"mt-1 block w-full text-sm text-gray-600 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-gray-700 dark:file:text-gray-200"}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:h.attachments}),u.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-3",children:u.map((t,d)=>e.jsxs("div",{className:"relative rounded overflow-hidden border dark:border-gray-600",children:[e.jsx("img",{src:t.url,alt:`preview-${d}`,className:"w-full h-32 object-cover"}),e.jsx("button",{type:"button",onClick:()=>_(d),className:"absolute top-1 right-1 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"âœ•"})]},d))})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"scheduled_at",value:"Schedule Date & Time"}),e.jsx("input",{type:"datetime-local",id:"scheduled_at",value:n.scheduled_at,onChange:t=>m("scheduled_at",t.target.value),required:!0,className:"mt-1 block w-full dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 rounded-md border-gray-300 focus:ring focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(j,{className:"mt-2 dark:text-red-400",message:h.scheduled_at})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{disabled:S,children:"Schedule Message"}),e.jsx(Z,{show:M,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scheduled."})})]})]})]})}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-200 mb-4",children:"Scheduled Messages"}),r.length===0?e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No scheduled messages yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 dark:border-gray-700 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Message"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Scheduled At"}),e.jsx("th",{className:"px-4 py-2 text-left text-gray-700 dark:text-gray-200",children:"Action"})]})}),e.jsx("tbody",{children:r.map(t=>e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200 truncate max-w-sm",children:t.message}),e.jsx("td",{className:"px-4 py-2 text-gray-600 dark:text-gray-400",children:new Date(t.scheduled_at).toLocaleString()}),e.jsxs("td",{className:"px-4 space-x-3 py-2",children:[e.jsx("button",{onClick:()=>{w(!0),g(t)},className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600",children:e.jsx(H,{className:"w-4"})}),e.jsx("button",{onClick:()=>{c(!0),g(t)},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:e.jsx($,{className:"w-4"})})]})]},t.id))})]})})]})]})}),e.jsx(U,{isOpen:i,setIsOpen:w,message:x}),e.jsx(O,{onClose:v,onConfirm:N,show:s,selectedMessage:x})]})};V.layout=a=>e.jsx(P,{header:e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Schedule Message"}),e.jsx(E,{href:route("dashboard"),className:"py-3 px-4 bg-gray-50 text-slate-900 rounded-md text-sm",children:"Back"})]}),children:a});export{V as default};
